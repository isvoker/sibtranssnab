!function(e,t){"use strict";document.addEventListener("DOMContentLoaded",()=>{setTimeout(function(){e.fn.accordion&&e(".easyui-accordion").length&&(e(".easyui-accordion.not-selected").each(function(){const t=e(this).accordion("getSelected");t&&t.panel("collapse",!1)}),e('<div class="accordion-panel-collapse">[свернуть]</div>').appendTo(".accordion .accordion-body"),e(document).on("click",".accordion-panel-collapse",function(){const t=e(this.closest(".accordion")).accordion("getSelected");return t&&t.panel("collapse",!0),!1}))},500)}),t.submitFormTreeProcessing=function(n){n.find(".js__input_dic-tree").each(function(){const o=this.dataset.name,i=Boolean(this.dataset.checkbox);let c="";if(n.children(`.js__for-tree_${o}`).remove(),i){const n=e(this).tree("getChecked"),i=n.length;for(let e=0;e<i;e++)t.is(n[e],"object")&&null!==n[e]&&(c+=`<input type="hidden" class="js__input js__for-tree_${o}" name="${o}[]" value="${n[e].id}"/>`)}else{const n=e(this).tree("getSelected");t.is(n,"object")&&null!==n&&(c=`<input type="hidden" class="js__input js__for-tree_${o}" name="${o}" value="${n.id}"/>`)}e(c).appendTo(n)})},t.clearFormTreeProcessing=function(n){n.clearForm(),n.find(".js__input_dic-tree").each(function(){if(Boolean(this.dataset.checkbox)){const n=e(this).tree("getChecked"),o=n.length;for(let i=0;i<o;i++)t.is(n[i],"object")&&null!==n[i]&&e(this).tree("uncheck",n[i].target)}}),n.find('input[class *= "js__for-tree_"]').remove()},t.searchAndMark=function(e,n,o,i){const c=e.tree("getChecked");let a,s=c.length;for(let n=0;n<s;n++)t.is(c[n],"object")&&null!==c[n]&&e.tree("uncheck",c[n].target);s=o.length;for(let c=0;c<s;c++){if(t.in_array(o[c].id,i)){if(a=e.tree("find",o[c].id),!n){e.tree("select",a.target);break}e.tree("check",a.target)}t.is(o[c].children,"undefined")||t.searchAndMark(e,n,o[c].children,i)}},t.datagridContextMenu=function(n,o,i){t.ignoreEvent(i);const c=e("#"+o);c.length||function(t,n){const o=e('<div id="'+n+'" class="easyui-menu" style="width:250px;"></div>').appendTo("body"),i=t.datagrid("getColumnFields"),c=i.length;let a;for(let n=0;n<c;n++)a=t.datagrid("getColumnOption",i[n]),e("<div data-options=\"iconCls:'"+(a.hidden?"":"icon-ok")+'\'" id="'+i[n]+'"/>').html(a.title.replace(/<.*?>/g," ")).appendTo(o);o.menu({onClick:function(e){"icon-ok"===e.iconCls?(t.datagrid("hideColumn",e.id),o.menu("setIcon",{target:e.target,iconCls:"icon-empty"})):(t.datagrid("showColumn",e.id),o.menu("setIcon",{target:e.target,iconCls:"icon-ok"}))}})}(n,o),c.menu("show",{left:i.pageX,top:i.pageY})}}(jQuery,Common);