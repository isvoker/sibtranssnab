!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){"use strict";function e(e,i){this.MAX_SPEED=5,this.MAX_ACCELERATION=5,this.id="",this.defaults={pagesTotal:1,pagesToShow:10,pageWidth:30,pageMargin:1,selectedPage:1,arrows:!0,maxBtnLeftClass:"paginator__arrow_left-max",overBtnLeftClass:"paginator__arrow_left",overBtnRightClass:"paginator__arrow_right",maxBtnRightClass:"paginator__arrow_right-max",speed:2,acceleration:2,withSlider:!0,minSlidesForSlider:3,sliderPadding:28,sliderHeight:22,precision:100,onPageClicked:null},this.state={width:0,firtsNumber:null,maxFirtsNumber:1,pageFullWidth:0,infRel:0,cInfMax:0,cInf:0,nbMove:0,isMoving:!1,isLimitL:!1,isLimitR:!1,isSliderListening:!0,isNumListening:!0,$slider:null,isSliderReady:!1},this.options="object"==typeof i?Object.assign({},this.defaults,i):this.defaults,this.direction={left:0,right:1},this.$element=t(e),this.element=this.$element[0]}e.prototype.init=function(){var t,e,i=this,s=0;i.options.pagesTotal>100?i.options.pageWidth*=3:i.options.pagesTotal>10&&(i.options.pageWidth*=2),i.options.pagesToShow=Math.min(i.options.pagesToShow,i.options.pagesTotal),i.state.maxFirtsNumber=i.options.pagesTotal-i.options.pagesToShow+1,i.options.speed=Math.min(Math.round(Math.abs(i.options.speed)),i.MAX_SPEED),i.options.acceleration=Math.min(Math.round(Math.abs(i.options.acceleration)),i.MAX_ACCELERATION),i.generateId(),i.element.innerHTML='<div class="paginator__list"><div class="paginator__track">'+i.getPagesHtml()+"</div></div>",i.$element.on("click",".paginator__page",i.onClickNum.bind(i)),i.options.pagesToShow<i.options.pagesTotal&&(i.options.arrows&&i.initArrows(),t=Math.ceil(i.options.pagesTotal/i.options.pagesToShow),i.options.withSlider&&t>=i.options.minSlidesForSlider&&i.initSlider()),e=i.$element.find(".paginator__page").first().css("border-left-width"),e.indexOf("px")>0&&(s=Number(e.replace("px",""))),i.state.pageFullWidth=i.options.pageWidth+2*(i.options.pageMargin+s),i.state.cInfMax=(i.options.pagesTotal-i.options.pagesToShow)*i.state.pageFullWidth,i.setSelectedPage(i.options.selectedPage),i.goToSelectedPage(),i.applyStyling(),i.fixSliderWidth()},e.prototype.generateId=function(){this.id=this.element.id="_"+Math.random().toString(36).substr(2,9)},e.prototype.reset=function(){this.state.nbMove=0,this.state.isMoving=!1},e.prototype.initArrows=function(){var t=this;t.element.innerHTML='<a class="paginator__arrow '+t.options.maxBtnLeftClass+'"></a><a class="paginator__arrow '+t.options.overBtnLeftClass+'"></a>'+t.element.innerHTML+'<a class="paginator__arrow '+t.options.overBtnRightClass+'"></a><a class="paginator__arrow '+t.options.maxBtnRightClass+'"></a>',t.$element.on("mouseover","."+t.options.overBtnLeftClass,function(){t.onEnterButton(t.direction.left)}).on("mouseleave","."+t.options.overBtnLeftClass,function(){t.onLeaveButton(t.$element)}).on("mouseover","."+t.options.overBtnRightClass,function(){t.onEnterButton(t.$element,t.direction.right)}).on("mouseleave","."+t.options.overBtnRightClass,function(){t.onLeaveButton()}).on("click","."+t.options.maxBtnLeftClass,function(){t.moveToLimit(t.direction.left)}).on("click","."+t.options.maxBtnRightClass,function(){t.moveToLimit(t.direction.right)})},e.prototype.initSlider=function(){if(t.fn.slider&&!this.state.isSliderReady){var e=this;e.element.innerHTML+='<div class="paginator_slider"></div>',e.state.$slider=e.$element.find(".paginator_slider"),e.state.$slider.slider({height:e.options.sliderHeight,max:100*e.options.precision,onChange:function(t,i){e.handleSliderChange(t,i)}}),e.state.isSliderReady=!0}},e.prototype.handleSliderChange=function(t,e){this.state.isSliderListening&&!this.state.isMoving&&t!==e&&(this.state.isNumListening=!1,this.moveBySlider(t),this.state.isNumListening=!0)},e.prototype.updateSliderValue=function(){if(this.state.isSliderReady&&this.state.isNumListening){var t=this.state.$slider.slider("getValue"),e=Math.round(this.state.cInf/this.state.cInfMax*100*this.options.precision);this.state.isSliderListening=!1,"number"!=typeof e||isNaN(e)||e===t||this.state.$slider.slider("setValue",e),this.state.isSliderListening=!0}},e.prototype.fixSliderWidth=function(){this.state.isSliderReady&&this.state.$slider.slider("resize",{width:this.state.width-2*this.options.sliderPadding+"px",height:this.options.sliderHeight})},e.prototype.setSelectedPage=function(t){return t=Number(t),this.options.selectedPage===t?!1:(t=Math.max(1,t),t=Math.min(t,this.options.pagesTotal),this.options.selectedPage=t,!0)},e.prototype.applyStyling=function(){var e=this,i=e.state.pageFullWidth*e.options.pagesToShow,s=document.createElement("style");e.state.width=i,e.$element.find(".paginator__arrow:visible").each(function(){e.state.width+=t(this).outerWidth(!0)}),s.id="paginator-style"+e.id,s.innerHTML="#"+e.id+"{width:"+e.state.width+"px}#"+e.id+" .paginator__list{width:"+i+"px}#"+e.id+" .paginator__page{margin:0 "+e.options.pageMargin+"px;width:"+e.options.pageWidth+"px}",document.head.appendChild(s)},e.prototype.getPagesHtml=function(){for(var t="",e=this.state.firtsNumber-1,i=1;i<=this.options.pagesToShow+2;i++)t+='<a class="paginator__page" href="#">'+e++ +"</a>";return t},e.prototype.markSelectedPage=function(){var t=this.options.selectedPage-this.state.firtsNumber+1;this.$element.find(".paginator__track>.paginator__page.selected").removeClass("selected"),t>0&&t<this.options.pagesToShow+2&&this.$element.find(".paginator__track>.paginator__page").get(t).classList.add("selected")},e.prototype.updateNumbers=function(t){t=Math.max(1,t),t=Math.min(this.state.maxFirtsNumber,t),this.$element.find(".paginator__track").css("left","-"+(this.state.pageFullWidth+this.state.infRel)+"px"),this.state.firtsNumber!==t&&(this.state.firtsNumber=t,this.$element.find(".paginator__track").html(this.getPagesHtml()),this.markSelectedPage(),this.state.cInf=(t-1)*this.state.pageFullWidth,this.state.infRel=0)},e.prototype.moveBySlider=function(t){t=Math.max(0,t),t=Math.min(100*this.options.precision,t),t<2*this.options.precision?this.updateNumbers(1):t>98*this.options.precision?this.updateNumbers(this.state.maxFirtsNumber):this.doMove(Math.round(this.state.cInfMax*t/(100*this.options.precision))-this.state.cInf)},e.prototype.doMove=function(t){if(0!==t){var e,i,s,o;e=this.state.infRel+t,this.state.infRel=e%this.state.pageFullWidth,i=Math.floor(Math.abs(e)/this.state.pageFullWidth),i&&0>t&&(i*=-1),s=this.state.firtsNumber+i,1>s?(s=1,o=-1):s>this.state.maxFirtsNumber?(s=this.state.maxFirtsNumber,o=this.state.cInfMax+1):o=this.state.cInf+t,0>o?(this.state.cInf=0,this.state.infRel=0,this.state.isLimitL=!0,this.reset()):o>this.state.cInfMax?(this.state.cInf=this.state.cInfMax,this.state.infRel=0,this.state.isLimitR=!0,this.reset()):(this.state.cInf=o,this.state.isLimitL=this.state.isLimitR=!1),this.updateNumbers(s),this.updateSliderValue()}},e.prototype.moveToLimit=function(t){var e=this;if(!(e.state.isLimitR&&t===e.direction.right||e.state.isLimitL&&t===e.direction.left)){var i=Math.round(e.state.cInfMax/10)*++e.state.nbMove;t===e.direction.left&&(i*=-1),e.doMove(i),setTimeout(function(){e.moveToLimit(t)},20)}},e.prototype.move=function(t){var e=this;if(e.state.isMoving){var i=e.options.speed;e.options.acceleration&&(i+=Math.round(e.options.acceleration*e.state.nbMove*e.state.nbMove/8e4),e.state.nbMove++),t===e.direction.left&&(i*=-1),e.doMove(i),setTimeout(function(){e.move(t)},10)}},e.prototype.goToSelectedPage=function(){this.updateNumbers(this.options.selectedPage-Math.floor((this.options.pagesToShow-1)/2)),this.updateSliderValue()},e.prototype.onEnterButton=function(t){this.state.isMoving=!0,this.move(t)},e.prototype.onLeaveButton=function(){this.reset()},e.prototype.onClickNum=function(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault(),this.setSelectedPage(t.target.innerText)&&(this.markSelectedPage(),this.options.onPageClicked&&this.options.onPageClicked.call(t,this.options.selectedPage))},t.fn.dPaginator=function(t){var i,s=this.length;for(i=0;s>i;i++)this[i].dPaginator=new e(this[i],t||{}),this[i].dPaginator.init()}});